#!/bin/bash
set -e

# check poetry is installed
if [ -d /opt/poetry/bin ] ; then
  echo "please install poetry using helmet/install/scripts/poetry.sh"
  exit 1
fi

# setup cyecca poetry env for use by ros (using shebang)
mkdir -p ~/bin
cat << EOF >> ~/bin/python_cyecca
#!/bin/bash
pushd ~/cognipilot/tools/src/cyecca
poetry run python \$@
popd
EOF
chmod +x ~/bin/python_cyecca

pushd ~/cognipilot/tools/src/cyecca
poetry install
poetry run jupyter lab
popd
